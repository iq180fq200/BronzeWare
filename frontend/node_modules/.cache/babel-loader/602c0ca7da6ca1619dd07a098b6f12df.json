{"ast":null,"code":"var _jsxFileName = \"E:\\\\frontend\\\\src\\\\echarts\\\\MyMap2.jsx\";\nimport React from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MyMap2 extends React.Component {\n  constructor() {\n    super();\n  }\n\n  componentDidMount() {\n    mapboxgl.accessToken = 'pk.eyJ1IjoiemhhbmdqaW5neXVhbiIsImEiOiJja2R5cHhoNXYycGVtMnlteXkwZGViZDc2In0.UhckH-74AgPwMsDhPjparQ';\n    const map = new mapboxgl.Map({\n      container: this.mapContainer,\n      // 地图容器 id\n      style: 'mapbox://styles/mapbox/streets-v11',\n      // 样式\n      center: [104.294538, 35.860092],\n      // 地图初始中心点 [经度, 维度]\n      zoom: 2.4 // 地图初始缩放级别\n\n    });\n    map.on('load', function () {\n      map.addSource('points', {\n        'type': 'geojson',\n        'data': 'https://900913.cn/geoserver/buildings/ows?service=WFS&version=2.0.0&request=GetFeature&typeName=buildings:cq_point&outputFormat=application/json',\n        'cluster': true,\n        'clusterMaxZoom': 10,\n        // 最大聚合 zoom， 超过这个值则不聚合\n        'clusterRadius': 50 // 聚合半径，默认 50\n\n      });\n    });\n    map.addLayer({\n      'id': 'clusters',\n      'type': 'circle',\n      'source': 'cq_point',\n      'filter': ['has', 'point_count'],\n      'paint': {\n        //   * Blue, 20px 点数量小于 5\n        //   * Yellow, 30px 点数量 5 - 10\n        //   * Pink, 40px circles 点数量 [10, ∞)\n        'circle-color': ['step', ['get', 'point_count'], '#51bbd6', 5, '#f1f075', 10, '#f28cb1'],\n        'circle-radius': ['step', ['get', 'point_count'], 20, 5, 30, 10, 40]\n      }\n    }); // 聚合数量图层\n\n    map.addLayer({\n      'id': 'cluster-count',\n      'type': 'symbol',\n      'source': 'cq_point',\n      'filter': ['has', 'point_count'],\n      'layout': {\n        'text-field': '{point_count_abbreviated}',\n        'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n        'text-size': 12\n      }\n    }); // 不聚合图层\n\n    map.addLayer({\n      'id': 'unclustered-point',\n      'type': 'circle',\n      'source': 'cq_point',\n      'filter': ['!', ['has', 'point_count']],\n      'paint': {\n        'circle-color': '#11b4da',\n        'circle-radius': 4,\n        'circle-stroke-width': 1,\n        'circle-stroke-color': '#fff'\n      }\n    });\n    var nav = new mapboxgl.NavigationControl();\n    map.addControl(nav, 'top-left');\n    this.setState({\n      map: map\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"link\", {\n        href: \"https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css\",\n        rel: \"stylesheet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: el => this.mapContainer = el,\n        style: {\n          height: '90%',\n          width: '95%',\n          position: 'absolute'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nexport default MyMap2;","map":{"version":3,"sources":["E:/frontend/src/echarts/MyMap2.jsx"],"names":["React","mapboxgl","MyMap2","Component","constructor","componentDidMount","accessToken","map","Map","container","mapContainer","style","center","zoom","on","addSource","addLayer","nav","NavigationControl","addControl","setState","render","el","height","width","position"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport mapboxgl from 'mapbox-gl'\r\n\r\nclass MyMap2 extends React.Component {\r\n    constructor() {\r\n      super();\r\n    }\r\n  \r\n    componentDidMount() {\r\n    mapboxgl.accessToken = 'pk.eyJ1IjoiemhhbmdqaW5neXVhbiIsImEiOiJja2R5cHhoNXYycGVtMnlteXkwZGViZDc2In0.UhckH-74AgPwMsDhPjparQ'\r\n    const map = new mapboxgl.Map({\r\n    container: this.mapContainer, // 地图容器 id\r\n    style: 'mapbox://styles/mapbox/streets-v11', // 样式\r\n    center: [104.294538, 35.860092], // 地图初始中心点 [经度, 维度]\r\n    zoom: 2.4 // 地图初始缩放级别\r\n    });\r\n\r\n    map.on('load', function () { \r\n      map.addSource('points', {\r\n        'type': 'geojson',\r\n        'data': 'https://900913.cn/geoserver/buildings/ows?service=WFS&version=2.0.0&request=GetFeature&typeName=buildings:cq_point&outputFormat=application/json',\r\n        'cluster': true,\r\n        'clusterMaxZoom': 10, // 最大聚合 zoom， 超过这个值则不聚合\r\n        'clusterRadius': 50 // 聚合半径，默认 50\r\n      })\r\n      })\r\n      map.addLayer({\r\n        'id': 'clusters',\r\n        'type': 'circle',\r\n        'source': 'cq_point',\r\n        'filter': ['has', 'point_count'],\r\n        'paint': {\r\n          //   * Blue, 20px 点数量小于 5\r\n          //   * Yellow, 30px 点数量 5 - 10\r\n          //   * Pink, 40px circles 点数量 [10, ∞)\r\n          'circle-color': [\r\n            'step',\r\n            ['get', 'point_count'],\r\n            '#51bbd6',\r\n            5,\r\n            '#f1f075',\r\n            10,\r\n            '#f28cb1'\r\n          ],\r\n          'circle-radius': [\r\n            'step',\r\n            ['get', 'point_count'],\r\n            20,\r\n            5,\r\n            30,\r\n            10,\r\n            40\r\n          ]\r\n        }\r\n      })\r\n      // 聚合数量图层\r\n      map.addLayer({\r\n        'id': 'cluster-count',\r\n        'type': 'symbol',\r\n        'source': 'cq_point',\r\n        'filter': ['has', 'point_count'],\r\n        'layout': {\r\n          'text-field': '{point_count_abbreviated}',\r\n          'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\r\n          'text-size': 12\r\n        }\r\n      })\r\n      // 不聚合图层\r\n      map.addLayer({\r\n        'id': 'unclustered-point',\r\n        'type': 'circle',\r\n        'source': 'cq_point',\r\n        'filter': ['!', ['has', 'point_count']],\r\n        'paint': {\r\n          'circle-color': '#11b4da',\r\n          'circle-radius': 4,\r\n          'circle-stroke-width': 1,\r\n          'circle-stroke-color': '#fff'\r\n        }\r\n      })\r\n    \r\n    var nav = new mapboxgl.NavigationControl();\r\n    map.addControl(nav, 'top-left');\r\n    this.setState({map: map});\r\n    }\r\n    \r\n    render() { \r\n        return (\r\n          <div>\r\n            {/* 引入样式文件 */}\r\n            <link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' />\r\n            {/* 地图容器 */}\r\n            <div ref={el => this.mapContainer = el} style={{height: '90%', width:'95%', position: 'absolute'}} />\r\n          </div>\r\n        );\r\n      }\r\n}\r\nexport default MyMap2;"]},"metadata":{},"sourceType":"module"}