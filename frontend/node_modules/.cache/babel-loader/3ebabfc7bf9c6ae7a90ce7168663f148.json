{"ast":null,"code":"var _jsxFileName = \"E:\\\\frontend\\\\src\\\\echarts\\\\MyMap.jsx\";\nimport React from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst datasource = require(\"./datasource.json\");\n\nvar data = new Array(1000);\nvar j = 0;\n\nfor (var i = 0; i < datasource.length; i++) {\n  if (datasource[i][\"地点\"] !== '空') {\n    data[j] = {\n      position: [parseFloat(datasource[i]['经度']), parseFloat(datasource[i]['维度'])],\n      content: datasource[i]['名称']\n    };\n  }\n}\n\nconsole.log(data[2]);\n\nclass MyMap extends React.Component {\n  constructor() {\n    super();\n  }\n\n  componentDidMount() {\n    const markers = [{\n      color: '#ff0000',\n      position: [108.937724, 34.354122],\n      content: \"位置1\"\n    }, {\n      color: '#ffffff',\n      position: [114.057868, 22.535256],\n      content: \"位置2\",\n      offset: [10, 0]\n    }, {\n      color: '#ffffff',\n      position: [121.666072, 31.073487],\n      content: \"位置3\",\n      offset: [10, -20],\n      direction: \"left\"\n    }, {\n      color: '#ffffff',\n      position: [13.782559, 53.241914],\n      content: \"位置4\",\n      offset: [-10, -20],\n      direction: \"right\"\n    }, {\n      color: '#ffffff',\n      position: [151.107195, -33.80666],\n      content: \"位置5\",\n      offset: [-10, -10],\n      direction: \"right\"\n    }, {\n      color: '#ffffff',\n      position: [-124.740278, 50.413675],\n      content: \"位置6\",\n      offset: [-10, -10],\n      direction: \"right\"\n    }, {\n      color: '#ffffff',\n      position: [-115.243971, 32.761748],\n      content: \"位置7\",\n      // offset: [-10,-10],\n      direction: \"right\"\n    }, {\n      color: '#ffffff',\n      position: [-72.606031, 42.087923],\n      content: \"位置8\",\n      offset: [10, -10],\n      direction: \"left\"\n    }];\n    mapboxgl.accessToken = 'pk.eyJ1IjoiemhhbmdqaW5neXVhbiIsImEiOiJja2R5cHhoNXYycGVtMnlteXkwZGViZDc2In0.UhckH-74AgPwMsDhPjparQ';\n    const map = new mapboxgl.Map({\n      container: this.mapContainer,\n      // container ID\n      style: 'mapbox://styles/mapbox/satellite-v9',\n      // style URL\n      center: [110, 30],\n      // starting position [lng, lat]\n      zoom: 1,\n      maxZoom: 5\n    });\n    markers.forEach(function (marker) {\n      const marker_on = new mapboxgl.Marker({\n        color: marker.color,\n        anchor: \"center\",\n        draggable: false\n      }).setLngLat(marker.position).addTo(map);\n      const el = marker_on.getElement();\n      el.addEventListener('click', () => {\n        window.alert(marker.content);\n      });\n      const popup = new mapboxgl.Popup({\n        anchor: marker.direction,\n        offset: marker.offset,\n        className: 'info',\n        closeButton: false,\n        closeOnClick: false,\n        maxWidth: '200px'\n      }).setLngLat(marker.position).addTo(map);\n    }); //   mapboxgl.accessToken = 'pk.eyJ1IjoiemhhbmdqaW5neXVhbiIsImEiOiJja2R5cHhoNXYycGVtMnlteXkwZGViZDc2In0.UhckH-74AgPwMsDhPjparQ';\n    //   const map = new mapboxgl.Map({\n    //   container: this.mapContainer,\n    //   style: 'mapbox://styles/mapbox/satellite-v9',\n    //   center: [110, 30],\n    //   zoom: 4,\n    //   scrollZoom: false,\n    //   });\n    //   map.on('load', function () {        /* on(type,callback)为type事件添加监听器，callback是响应函数*/\n    //     map.addSource(\"points\", {\n    //         \"type\": \"geojson\",          /* geojson类型资源 */\n    //         \"data\": {                   /* geojson数据 */\n    //             \"type\": \"FeatureCollection\",\n    //             \"features\": [{\n    //                 \"type\": \"Feature\",\n    //                 \"geometry\": {\n    //                     \"type\": \"Point\",\n    //                     \"coordinates\": [77.03238901390978, 38.913188059745586]\n    //                 },\n    //                 \"properties\": {\n    //                     \"title\": \"Mapbox DC\",\n    //                     //\"icon\": \"monument\"\n    //                 }\n    //             }, {\n    //                 \"type\": \"Feature\",\n    //                 \"geometry\": {\n    //                     \"type\": \"Point\",\n    //                     \"coordinates\": [122.414, 37.776]\n    //                 },\n    //                 \"properties\": {\n    //                     \"title\": \"Mapbox SF\",\n    //                     //\"icon\": \"harbor\"\n    //                 }\n    //             }]\n    //         }\n    //     });\n    //     map.addLayer({\n    //         \"id\": \"points\",\n    //         \"type\": \"symbol\",   /* symbol类型layer，一般用来绘制点*/\n    //         \"source\": \"points\",\n    //         \"layout\": {\n    //           \"icon-image\": \"{icon}-15\",   /* 图标图像 */\n    //           \"text-field\": \"{title}\",     /* 使用text标签显示的值，Feature属性使用{域名}格式*/\n    //           \"text-font\": [\"Open Sans Semibold\", \"Arial Unicode MS Bold\"],  /* 文本字体 */\n    //           \"text-offset\": [0, 0.6],     /* 该属性表示文本偏移锚点的距离，正值表示向右和向下，负值表示向左和向上 */\n    //           \"text-anchor\": \"top\"         /* 该属性设置文本中最接近锚点的部分，top表示文本的顶端放置到最接近锚点的位置 */\n    //       }\n    //     });\n    // });\n    //   var nav = new mapboxgl.NavigationControl();\n    //   map.addControl(nav, 'top-left');\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"link\", {\n        href: \"https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css\",\n        rel: \"stylesheet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: el => this.mapContainer = el,\n        style: {\n          height: '100vh',\n          width: '100vw',\n          position: 'absolute'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default MyMap;","map":{"version":3,"sources":["E:/frontend/src/echarts/MyMap.jsx"],"names":["React","mapboxgl","datasource","require","data","Array","j","i","length","position","parseFloat","content","console","log","MyMap","Component","constructor","componentDidMount","markers","color","offset","direction","accessToken","map","Map","container","mapContainer","style","center","zoom","maxZoom","forEach","marker","marker_on","Marker","anchor","draggable","setLngLat","addTo","el","getElement","addEventListener","window","alert","popup","Popup","className","closeButton","closeOnClick","maxWidth","render","height","width"],"mappings":"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","sourcesContent":["import React from 'react'\nimport mapboxgl from 'mapbox-gl';\nconst datasource=require(\"./datasource.json\");\nvar data=new Array(1000); \nvar j=0;\nfor(var i=0;i<datasource.length;i++){\n   if(datasource[i][\"地点\"]!=='空'){\n     data[j]={\n       position:[parseFloat(datasource[i]['经度']),parseFloat(datasource[i]['维度'])],\n       content:datasource[i]['名称']\n     }\n   }\n}\nconsole.log(data[2]);\nclass MyMap extends React.Component {\n  constructor() {\n    super();\n  }\n\n  componentDidMount() {\n    const markers = [{\n      color: '#ff0000',\n      position: [108.937724,34.354122],\n      content:\"位置1\",\n      \n  }, {\n      color: '#ffffff',\n      position: [114.057868,22.535256],\n      content:\"位置2\",\n      offset: [10,0],\n      \n  }, {\n      color: '#ffffff',\n      position: [121.666072,31.073487],\n      content:\"位置3\",\n      offset: [10,-20],\n      direction:\"left\"\n  }, {\n      color: '#ffffff',\n      position: [13.782559,53.241914],\n      content:\"位置4\",\n      offset: [-10,-20],\n      direction:\"right\"\n  }, {\n      color: '#ffffff',\n      position: [151.107195,-33.80666],\n      content:\"位置5\",\n      offset: [-10,-10],\n      direction:\"right\"\n  }, {\n      color: '#ffffff',\n      position: [-124.740278,50.413675],\n      content:\"位置6\",\n      offset: [-10,-10],\n      direction:\"right\"\n  }, {\n      color: '#ffffff',\n      position: [-115.243971,32.761748],\n      content:\"位置7\",\n      // offset: [-10,-10],\n      direction:\"right\"\n  }, {\n      color: '#ffffff',\n      position: [-72.606031,42.087923],\n      content:\"位置8\",\n      offset: [10,-10],\n      direction:\"left\"\n  }];\nmapboxgl.accessToken = 'pk.eyJ1IjoiemhhbmdqaW5neXVhbiIsImEiOiJja2R5cHhoNXYycGVtMnlteXkwZGViZDc2In0.UhckH-74AgPwMsDhPjparQ';\nconst map = new mapboxgl.Map({\n  container: this.mapContainer, // container ID\n  style: 'mapbox://styles/mapbox/satellite-v9', // style URL\n  center:[110, 30], // starting position [lng, lat]\n  zoom: 1,\n  maxZoom:5\n});\n\n\n  markers.forEach(function(marker) {\n    const marker_on = new mapboxgl.Marker({\n    color: marker.color,\n    anchor:\"center\",\n    draggable: false,\n  }).setLngLat(marker.position)\n  .addTo(map);\n\n  const el = marker_on.getElement();\n  el.addEventListener('click', () => {\n  window.alert(marker.content);\n  });\n\n  const popup = new mapboxgl.Popup({anchor:marker.direction,offset: marker.offset, className: 'info',closeButton:false,closeOnClick:false,maxWidth:'200px'})\n  .setLngLat(marker.position)\n  .addTo(map);\n      \n\n  });\n\n\n  //   mapboxgl.accessToken = 'pk.eyJ1IjoiemhhbmdqaW5neXVhbiIsImEiOiJja2R5cHhoNXYycGVtMnlteXkwZGViZDc2In0.UhckH-74AgPwMsDhPjparQ';\n    \n  //   const map = new mapboxgl.Map({\n  //   container: this.mapContainer,\n  //   style: 'mapbox://styles/mapbox/satellite-v9',\n  //   center: [110, 30],\n  //   zoom: 4,\n  //   scrollZoom: false,\n  //   });\n  //   map.on('load', function () {        /* on(type,callback)为type事件添加监听器，callback是响应函数*/\n  //     map.addSource(\"points\", {\n  //         \"type\": \"geojson\",          /* geojson类型资源 */\n  //         \"data\": {                   /* geojson数据 */\n  //             \"type\": \"FeatureCollection\",\n  //             \"features\": [{\n  //                 \"type\": \"Feature\",\n  //                 \"geometry\": {\n  //                     \"type\": \"Point\",\n  //                     \"coordinates\": [77.03238901390978, 38.913188059745586]\n  //                 },\n  //                 \"properties\": {\n  //                     \"title\": \"Mapbox DC\",\n  //                     //\"icon\": \"monument\"\n  //                 }\n  //             }, {\n  //                 \"type\": \"Feature\",\n  //                 \"geometry\": {\n  //                     \"type\": \"Point\",\n  //                     \"coordinates\": [122.414, 37.776]\n  //                 },\n  //                 \"properties\": {\n  //                     \"title\": \"Mapbox SF\",\n  //                     //\"icon\": \"harbor\"\n  //                 }\n  //             }]\n  //         }\n  //     });\n   \n  //     map.addLayer({\n  //         \"id\": \"points\",\n  //         \"type\": \"symbol\",   /* symbol类型layer，一般用来绘制点*/\n  //         \"source\": \"points\",\n  //         \"layout\": {\n  //           \"icon-image\": \"{icon}-15\",   /* 图标图像 */\n  //           \"text-field\": \"{title}\",     /* 使用text标签显示的值，Feature属性使用{域名}格式*/\n  //           \"text-font\": [\"Open Sans Semibold\", \"Arial Unicode MS Bold\"],  /* 文本字体 */\n  //           \"text-offset\": [0, 0.6],     /* 该属性表示文本偏移锚点的距离，正值表示向右和向下，负值表示向左和向上 */\n  //           \"text-anchor\": \"top\"         /* 该属性设置文本中最接近锚点的部分，top表示文本的顶端放置到最接近锚点的位置 */\n  //       }\n  //     });\n  // });\n\n  //   var nav = new mapboxgl.NavigationControl();\n  //   map.addControl(nav, 'top-left');\n  }\n\n  render() { \n    return (\n      <div>\n        {/* 引入样式文件 */}\n        <link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' />\n        {/* 地图容器 */}\n        <div ref={el => this.mapContainer = el} style={{height: '100vh', width:'100vw', position: 'absolute'}} />\n      </div>\n    );\n  }\n}\n\nexport default MyMap;\n"]},"metadata":{},"sourceType":"module"}